- Always use types and avoid the 'any' type
- Always validate inputs using libraries like Zod
- Always factor out shared logic
- Don't maintain backwards compatbility, always delete code we're not using
- Read the design doc and keep it up-to-date @doc/DESIGN.md and @doc/architecture.d2
- Avoid N+1 queries, and check-then-set patterns; prefer to do joins or inserts with on conflict
- Design as much code as possible to be unit-testable with pure functions
- Prefer to use real versions of necessary systems for integration tests (i.e. actually run git in a tmp dir, actually run SQLite on an in-memory DB)
- Try to do work in commit-sized chunks and commit when each piece is complete
- Always commit changes when work is complete
- Always use cursor-based pagination and never offset
- Use pnpm instead of npm
- Always use shadcn/ui components
